# –ü–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ
1. [–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏](#–Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ-–∞–ª–ª–æ–∫–∞—Ü–∏–∏)
2. [–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π](#–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ-–æ–ø–µ—Ä–∞—Ü–∏–π)
3. [–ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å](#–∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∞—è-—Å–ª–æ–∂–Ω–æ—Å—Ç—å)
4. [–ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ](#–∏–∑–±—ã—Ç–æ—á–Ω–æ–µ-–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
5. [–ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏](#–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ-–æ–ø–µ—Ä–∞—Ü–∏–∏)

---

## –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏

### 1. –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∞–ª–ª–æ–∫–∞—Ü–∏–∏ –≤ —Ü–∏–∫–ª–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
```rust
// ‚ùå –ú–ï–î–õ–ï–ù–ù–û - –º–∏–ª–ª–∏–æ–Ω—ã –∞–ª–ª–æ–∫–∞—Ü–∏–π
fn process_items(items: &[Item]) -> Vec<String> {
    let mut result = Vec::new();  // –ù–∞—á–∞–ª—å–Ω–∞—è capacity = 0

    for item in items {
        result.push(item.to_string());  // –ö–∞–∂–¥—ã–π —Ä–∞–∑ –º–æ–∂–µ—Ç —Ä–µ–∞–ª–ª–æ—Ü–∏—Ä–æ–≤–∞—Ç—å!
    }

    result
}
```

**–ö–∞–∫ –Ω–∞–π—Ç–∏:**
```bash
rg "Vec::new\(\)" --type rust  # –ò—â–µ–º Vec::new() –±–µ–∑ with_capacity
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```rust
// ‚úÖ –ë–´–°–¢–†–û - –æ–¥–Ω–∞ –∞–ª–ª–æ–∫–∞—Ü–∏—è
fn process_items(items: &[Item]) -> Vec<String> {
    let mut result = Vec::with_capacity(items.len());  // –°—Ä–∞–∑—É –≤—ã–¥–µ–ª—è–µ–º –ø–∞–º—è—Ç—å

    for item in items {
        result.push(item.to_string());  // –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–µ–∞–ª–ª–æ—Ü–∏—Ä—É–µ—Ç
    }

    result
}

// üöÄ –ï–©–Å –ë–´–°–¢–†–ï–ï - –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã
fn process_items_fast(items: &[Item]) -> Vec<String> {
    items.iter().map(|item| item.to_string()).collect()
    // collect() —É–º–Ω—ã–π - —Å–∞–º –≤—ã–¥–µ–ª–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä
}
```

**–ò–∑–º–µ—Ä–∏–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –î–ª—è 10,000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤: **2-3x –±—ã—Å—Ç—Ä–µ–µ**
- –î–ª—è 100,000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤: **5-10x –±—ã—Å—Ç—Ä–µ–µ**

---

### 2. –õ–∏—à–Ω–∏–µ String –∞–ª–ª–æ–∫–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
```rust
// ‚ùå –ú–ï–î–õ–ï–ù–ù–û - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ String
fn build_url(host: &str, path: &str, query: &str) -> String {
    let mut url = String::new();
    url.push_str("https://");
    url.push_str(host);
    url.push('/');
    url.push_str(path);
    url.push('?');
    url.push_str(query);
    url
}
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```rust
// ‚úÖ –ë–´–°–¢–†–û - –æ–¥–Ω–∞ –∞–ª–ª–æ–∫–∞—Ü–∏—è –Ω—É–∂–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
fn build_url(host: &str, path: &str, query: &str) -> String {
    let capacity = 8 + host.len() + 1 + path.len() + 1 + query.len();
    let mut url = String::with_capacity(capacity);

    url.push_str("https://");
    url.push_str(host);
    url.push('/');
    url.push_str(path);
    url.push('?');
    url.push_str(query);

    url
}

// üöÄ –ò–õ–ò –∏—Å–ø–æ–ª—å–∑—É–π format! –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Ç—Ä–æ–∫
fn build_url_simple(host: &str, path: &str, query: &str) -> String {
    format!("https://{}/{}?{}", host, path, query)
}
```

---

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö Vec –≤–º–µ—Å—Ç–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
```rust
// ‚ùå –ú–ï–î–õ–ï–ù–ù–û - —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π Vec
fn sum_even_squares(nums: &[i32]) -> i32 {
    let evens: Vec<_> = nums.iter().filter(|&n| n % 2 == 0).collect();  // ‚ùå –ê–ª–ª–æ–∫–∞—Ü–∏—è!
    let squares: Vec<_> = evens.iter().map(|&n| n * n).collect();       // ‚ùå –ï—â–µ –æ–¥–Ω–∞!
    squares.iter().sum()
}
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```rust
// ‚úÖ –ë–´–°–¢–†–û - zero allocations
fn sum_even_squares(nums: &[i32]) -> i32 {
    nums.iter()
        .filter(|&n| n % 2 == 0)
        .map(|&n| n * n)
        .sum()
    // –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö Vec - –≤—Å–µ –≤ –æ–¥–Ω–æ–º –ø—Ä–æ—Ö–æ–¥–µ!
}
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –î–ª—è 1,000,000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤: **10-20x –±—ã—Å—Ç—Ä–µ–µ**
- **0 –∞–ª–ª–æ–∫–∞—Ü–∏–π** vs 2 –±–æ–ª—å—à–∏—Ö –∞–ª–ª–æ–∫–∞—Ü–∏–∏

---

## –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π

### –ü—Ä–∏–º–µ—Ä –∏–∑ –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
```rust
// ‚ùå –ú–ï–î–õ–ï–ù–ù–û - –ø–∞—Ä—Å–∏–º initData –î–í–ê —Ä–∞–∑–∞
pub fn validate_telegram_data(raw: &str, hash: &str, bot_token: &str) -> bool {
    let parsed = parse_query_string_raw(raw);  // 1-–π —Ä–∞–∑

    validate_auth_date(&parsed);

    let computed_hash = compute_hash(raw, bot_token);  // –í–Ω—É—Ç—Ä–∏ –µ—â–µ —Ä–∞–∑ –ø–∞—Ä—Å–∏—Ç!
    //                                ^^^
}

fn compute_hash(raw: &str, bot_token: &str) -> String {
    let parsed = parse_query_string_raw(raw);  // 2-–π —Ä–∞–∑ ‚ùå
    // ...
}
```

**–†–µ—à–µ–Ω–∏–µ:**
```rust
// ‚úÖ –ë–´–°–¢–†–û - –ø–∞—Ä—Å–∏–º –æ–¥–∏–Ω —Ä–∞–∑
pub fn validate_telegram_data(raw: &str, hash: &str, bot_token: &str) -> bool {
    let parsed = parse_query_string_raw(raw);  // –û–¥–∏–Ω —Ä–∞–∑!

    validate_auth_date(&parsed);

    let computed_hash = compute_hash(&parsed, bot_token);  // –ü–µ—Ä–µ–¥–∞–µ–º —Å—Å—ã–ª–∫—É
    //                                 ^^^^^^
}

fn compute_hash(parsed: &BTreeMap<String, String>, bot_token: &str) -> String {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —É–∂–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
}
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- **-50% –≤—Ä–µ–º–µ–Ω–∏** –Ω–∞ –ø–∞—Ä—Å–∏–Ω–≥
- –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è **–≥–æ—Ä—è—á–∏—Ö –ø—É—Ç–µ–π** (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —á–∞—Å—Ç–æ)

---

### –ö–∞–∫ –Ω–∞–π—Ç–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

**1. –ü–æ–∏—Å–∫ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π:**
```bash
# –ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è > 1 —Ä–∞–∑–∞ –≤ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
rg "(\w+)\(.*\).*\1\(" --type rust
```

**2. –í–∏–∑—É–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫:**
- –ò—â–∏ **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è–π, –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ª–∏ **—Ç—è–∂–µ–ª—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏

**–ü—Ä–∏–º–µ—Ä:**
```rust
// ‚ùå –ü–õ–û–•–û - –≤—ã—á–∏—Å–ª—è–µ—Ç len() –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
for i in 0..items.len() {
    if i < items.len() / 2 {  // len() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–Ω–æ–≤–∞!
        // ...
    }
}

// ‚úÖ –•–û–†–û–®–û
let len = items.len();
let half = len / 2;
for i in 0..len {
    if i < half {
        // ...
    }
}
```

---

## –ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

### 1. O(n¬≤) –≤–º–µ—Å—Ç–æ O(n)

**–ü—Ä–æ–±–ª–µ–º–∞:**
```rust
// ‚ùå O(n¬≤) - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø—Ä–æ—Ö–æ–¥–∏–º –≤–µ—Å—å Vec
fn remove_duplicates(items: Vec<String>) -> Vec<String> {
    let mut result = Vec::new();

    for item in items {
        if !result.contains(&item) {  // ‚ùå O(n) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞!
            result.push(item);
        }
    }

    result
}
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```rust
use std::collections::HashSet;

// ‚úÖ O(n) - –∏—Å–ø–æ–ª—å–∑—É–µ–º HashSet
fn remove_duplicates(items: Vec<String>) -> Vec<String> {
    let mut seen = HashSet::new();
    let mut result = Vec::new();

    for item in items {
        if seen.insert(item.clone()) {  // O(1) –≤ —Å—Ä–µ–¥–Ω–µ–º
            result.push(item);
        }
    }

    result
}

// üöÄ –ï–©–Å –ü–†–û–©–ï
fn remove_duplicates_simple(items: Vec<String>) -> Vec<String> {
    items.into_iter().collect::<HashSet<_>>().into_iter().collect()
}
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –î–ª—è 1,000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤: **100x –±—ã—Å—Ç—Ä–µ–µ**
- –î–ª—è 10,000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤: **1000x –±—ã—Å—Ç—Ä–µ–µ**

---

### 2. –õ–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫ –≤–º–µ—Å—Ç–æ HashMap

**–ü—Ä–æ–±–ª–µ–º–∞:**
```rust
// ‚ùå O(n) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–∏—Å–∫–∞
fn find_user_by_id(users: &[User], id: i64) -> Option<&User> {
    users.iter().find(|u| u.id == id)  // –ü—Ä–æ—Ö–æ–¥–∏—Ç –≤–µ—Å—å –º–∞—Å—Å–∏–≤!
}

// –í —Ü–∏–∫–ª–µ - –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞:
for id in user_ids {
    let user = find_user_by_id(&all_users, id);  // O(n) –∫–∞–∂–¥—ã–π —Ä–∞–∑!
}
// –ò—Ç–æ–≥–æ: O(m * n) –≥–¥–µ m = user_ids.len(), n = all_users.len()
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```rust
use std::collections::HashMap;

// ‚úÖ O(1) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–∏—Å–∫–∞
fn build_user_map(users: Vec<User>) -> HashMap<i64, User> {
    users.into_iter().map(|u| (u.id, u)).collect()
}

let user_map = build_user_map(all_users);  // O(n) –æ–¥–∏–Ω —Ä–∞–∑

for id in user_ids {
    let user = user_map.get(&id);  // O(1) –∫–∞–∂–¥—ã–π —Ä–∞–∑!
}
// –ò—Ç–æ–≥–æ: O(n + m) –≤–º–µ—Å—Ç–æ O(m * n)
```

**–≠—Ñ—Ñ–µ–∫—Ç –¥–ª—è 10,000 –ø–æ–∏—Å–∫–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ –∏–∑ 10,000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤:**
- –ë—ã–ª–æ: **~50,000,000** –æ–ø–µ—Ä–∞—Ü–∏–π (O(m*n))
- –°—Ç–∞–ª–æ: **~20,000** –æ–ø–µ—Ä–∞—Ü–∏–π (O(n+m))
- **2500x –±—ã—Å—Ç—Ä–µ–µ!**

---

### –ö–∞–∫ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

**1. –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã:**
```bash
rg "for.*\{[\s\S]*?for" --type rust  # –ò—â–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã
```

**2. Vec::contains –≤ —Ü–∏–∫–ª–µ:**
```bash
rg "\.contains\(" --type rust
```

**3. Linear search patterns:**
```bash
rg "\.iter\(\)\.find|\.iter\(\)\.position" --type rust
```

**–í–æ–ø—Ä–æ—Å—ã –∫ —Å–µ–±–µ:**
- –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∞–º–∞—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ–ø–µ—Ä–∞—Ü–∏—è?
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞–Ω–µ—Ç –≤ 10x –±–æ–ª—å—à–µ, –≤–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ?
- –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HashMap/HashSet/BTreeMap?

---

## –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. Clone() –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
```rust
// ‚ùå –ú–ï–î–õ–ï–ù–ù–û - –∫–æ–ø–∏—Ä—É–µ—Ç –≤–µ—Å—å Vec
fn process_items(items: Vec<String>) -> usize {
    let copy = items.clone();  // ‚ùå –ó–∞—á–µ–º?
    copy.len()
}
```

**–ö–∞–∫ –Ω–∞–π—Ç–∏:**
```bash
rg "\.clone\(\)" --type rust  # –ü—Ä–æ–≤–µ—Ä—å –∫–∞–∂–¥—ã–π clone!
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```rust
// ‚úÖ –ë–´–°–¢–†–û - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Å—ã–ª–∫—É
fn process_items(items: &[String]) -> usize {
    items.len()
}
```

---

### 2. to_string() –≤ –≥–æ—Ä—è—á–µ–º –ø—É—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
```rust
// ‚ùå –ú–ï–î–õ–ï–ù–ù–û - –º–∏–ª–ª–∏–æ–Ω—ã –∞–ª–ª–æ–∫–∞—Ü–∏–π
fn log_items(items: &[Item]) {
    for item in items {
        tracing::debug!("Item: {}", item.id.to_string());  // ‚ùå –õ–∏—à–Ω–∏–π to_string()
    }
}
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```rust
// ‚úÖ –ë–´–°–¢–†–û - Display —Å–∞–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç
fn log_items(items: &[Item]) {
    for item in items {
        tracing::debug!("Item: {}", item.id);  // –ë–µ–∑ to_string()
    }
}
```

---

### 3. Owned values –≤–º–µ—Å—Ç–æ —Å—Å—ã–ª–æ–∫

**–ü—Ä–∏–º–µ—Ä –∏–∑ –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**
```rust
// ‚ùå –ë–´–õ–û - –∫–æ–ø–∏—Ä—É–µ—Ç String'–∏
let mut kv_pairs: Vec<(String, String)> = parsed.into_iter()...

// ‚úÖ –°–¢–ê–õ–û - zero-copy
let mut kv_pairs: Vec<(&String, &String)> = parsed.iter()...
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –î–ª—è 100 –ø–∞—Ä –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ 20 —Å–∏–º–≤–æ–ª–æ–≤: **~4KB** vs **~0 –±–∞–π—Ç** –∞–ª–ª–æ–∫–∞—Ü–∏–π
- **3-5x –±—ã—Å—Ç—Ä–µ–µ**

---

## –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### 1. –ë–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O –≤ async —Ñ—É–Ω–∫—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
```rust
// ‚ùå –ë–õ–û–ö–ò–†–£–ï–¢ –≤–µ—Å—å runtime!
async fn handle_request() -> Result<String> {
    let data = std::fs::read_to_string("file.txt")?;  // ‚ùå Sync I/O!
    Ok(data)
}
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```rust
// ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ
async fn handle_request() -> Result<String> {
    let data = tokio::fs::read_to_string("file.txt").await?;
    Ok(data)
}

// –ò–ª–∏ –≤—ã–Ω–µ—Å–∏ –≤ blocking pool
async fn handle_request_alt() -> Result<String> {
    tokio::task::spawn_blocking(|| {
        std::fs::read_to_string("file.txt")
    }).await?
}
```

---

### 2. –î–æ–ª–≥–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ async

**–ü—Ä–æ–±–ª–µ–º–∞:**
```rust
// ‚ùå –ë–õ–û–ö–ò–†–£–ï–¢ –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏
async fn expensive_computation(n: u64) -> u64 {
    (0..n).sum()  // –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã/—Å–µ–∫—É–Ω–¥—ã
}
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
```rust
// ‚úÖ –í –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
async fn expensive_computation(n: u64) -> u64 {
    tokio::task::spawn_blocking(move || {
        (0..n).sum()
    }).await.unwrap()
}
```

---

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. Cargo Flamegraph
```bash
cargo install flamegraph
cargo flamegraph --bin your-app

# –û—Ç–∫—Ä–æ–µ—Ç—Å—è flamegraph.svg - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥–¥–µ –ø—Ä–æ–≤–æ–¥–∏—Ç—Å—è –≤—Ä–µ–º—è
```

### 2. Cargo Bench
```bash
# –î–æ–±–∞–≤—å –≤ Cargo.toml:
# [dev-dependencies]
# criterion = "0.5"

# benches/my_benchmark.rs
use criterion::{black_box, criterion_group, criterion_main, Criterion};

fn benchmark_parse(c: &mut Criterion) {
    let data = "auth_date=123&user=test&hash=abc";

    c.bench_function("parse_query_string", |b| {
        b.iter(|| parse_query_string_raw(black_box(data)))
    });
}

criterion_group!(benches, benchmark_parse);
criterion_main!(benches);
```

```bash
cargo bench
```

### 3. Cargo Asm - —Å–º–æ—Ç—Ä–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
```bash
cargo install cargo-asm
cargo asm your_crate::function_name
```

---

## –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ê–ª–ª–æ–∫–∞—Ü–∏–∏
- [ ] Vec::new() –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ Vec::with_capacity() –≥–¥–µ –∏–∑–≤–µ—Å—Ç–µ–Ω —Ä–∞–∑–º–µ—Ä?
- [ ] –ù–µ—Ç –ª–∏—à–Ω–∏—Ö .clone() –∏ .to_string()?
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã –≤–º–µ—Å—Ç–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö Vec?
- [ ] String::with_capacity() –¥–ª—è –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏?

### –ê–ª–≥–æ—Ä–∏—Ç–º—ã
- [ ] –ù–µ—Ç O(n¬≤) –≥–¥–µ –º–æ–∂–Ω–æ O(n)?
- [ ] HashMap –≤–º–µ—Å—Ç–æ linear search?
- [ ] –ù–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ –ø–æ –±–æ–ª—å—à–∏–º –¥–∞–Ω–Ω—ã–º?
- [ ] –ü—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ã–±—Ä–∞–Ω—ã —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö?

### –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Å—ã–ª–∫–∏ (&T) –≤–º–µ—Å—Ç–æ owned (T)?
- [ ] –ù–µ—Ç –ª–∏—à–Ω–∏—Ö .clone()?
- [ ] –ò–∑–±–µ–≥–∞—é—Ç—Å—è .to_owned()/.to_string() –≤ –≥–æ—Ä—è—á–∏—Ö –ø—É—Ç—è—Ö?

### Async
- [ ] –ù–µ—Ç –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ async?
- [ ] –î–æ–ª–≥–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ spawn_blocking?
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è async I/O?

### –û–±—â–µ–µ
- [ ] –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π?
- [ ] –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–∞–ª–æ –ø—Ä–æ–±–ª–µ–º—ã?
- [ ] –ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã?

---

## –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

### –î–µ–ª–∞–π –¢–û–õ–¨–ö–û –µ—Å–ª–∏:
1. **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–∞–ª–æ –ø—Ä–æ–±–ª–µ–º—É** (–Ω–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –Ω–∞—É–≥–∞–¥!)
2. **–≠—Ç–æ –≥–æ—Ä—è—á–∏–π –ø—É—Ç—å** (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —á–∞—Å—Ç–æ)
3. **–ò–∑–º–µ—Ä–∏–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç** (–º–∏–Ω–∏–º—É–º 10% —É–ª—É—á—à–µ–Ω–∏–µ)

### –ù–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π:
- –•–æ–ª–æ–¥–Ω—ã–µ –ø—É—Ç–∏ (startup, —Ä–µ–¥–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä
- –ï—Å–ª–∏ —ç—Ç–æ —É—Ö—É–¥—à–∏—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã–∏–≥—Ä—ã—à–∞

**–ü—Ä–∞–≤–∏–ª–æ:** "Premature optimization is the root of all evil" - Donald Knuth

–ù–æ: "Premature pessimization is also evil" - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞.
